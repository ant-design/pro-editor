"use strict";(self.webpackChunk_ant_design_pro_editor=self.webpackChunk_ant_design_pro_editor||[]).push([[4124],{44124:function(De,z,v){v.r(z),v.d(z,{default:function(){return Ye}});var C=v(75271),Ar=v(26068),O=v.n(Ar),xr=v(48305),Tr=v.n(xr),Ir=v(26458),Cr=v(16665),Pr=v(3341),N=v.n(Pr),Ur=v(88955),Lr=v(97412),Or=v(79258),f=v(37995),j=function(r){return r&&typeof r.length=="number"&&typeof r!="function"};function s(r){return typeof r=="function"}function q(r){return s(r==null?void 0:r.then)}function Fr(r){var e=function(t){Error.call(t),t.stack=new Error().stack},n=r(e);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Y=Fr(function(r){return function(n){r(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(t,o){return o+1+") "+t.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function _(r,e){if(r){var n=r.indexOf(e);0<=n&&r.splice(n,1)}}var D=function(){function r(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return r.prototype.unsubscribe=function(){var e,n,t,o,i;if(!this.closed){this.closed=!0;var u=this._parentage;if(u)if(this._parentage=null,Array.isArray(u))try{for(var a=(0,f.XA)(u),c=a.next();!c.done;c=a.next()){var l=c.value;l.remove(this)}}catch(d){e={error:d}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}else u.remove(this);var h=this.initialTeardown;if(s(h))try{h()}catch(d){i=d instanceof Y?d.errors:[d]}var w=this._finalizers;if(w){this._finalizers=null;try{for(var m=(0,f.XA)(w),p=m.next();!p.done;p=m.next()){var U=p.value;try{er(U)}catch(d){i=i!=null?i:[],d instanceof Y?i=(0,f.ev)((0,f.ev)([],(0,f.CR)(i)),(0,f.CR)(d.errors)):i.push(d)}}}catch(d){t={error:d}}finally{try{p&&!p.done&&(o=m.return)&&o.call(m)}finally{if(t)throw t.error}}}if(i)throw new Y(i)}},r.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)er(e);else{if(e instanceof r){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}},r.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},r.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},r.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&_(n,e)},r.prototype.remove=function(e){var n=this._finalizers;n&&_(n,e),e instanceof r&&e._removeParent(this)},r.EMPTY=function(){var e=new r;return e.closed=!0,e}(),r}(),He=D.EMPTY;function rr(r){return r instanceof D||r&&"closed"in r&&s(r.remove)&&s(r.add)&&s(r.unsubscribe)}function er(r){s(r)?r():r.unsubscribe()}var g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},F={setTimeout:function(r,e){for(var n=[],t=2;t<arguments.length;t++)n[t-2]=arguments[t];var o=F.delegate;return o!=null&&o.setTimeout?o.setTimeout.apply(o,(0,f.ev)([r,e],(0,f.CR)(n))):setTimeout.apply(void 0,(0,f.ev)([r,e],(0,f.CR)(n)))},clearTimeout:function(r){var e=F.delegate;return((e==null?void 0:e.clearTimeout)||clearTimeout)(r)},delegate:void 0};function nr(r){F.setTimeout(function(){var e=g.onUnhandledError;if(e)e(r);else throw r})}function tr(){}var Mr=function(){return H("C",void 0,void 0)}();function Rr(r){return H("E",void 0,r)}function jr(r){return H("N",r,void 0)}function H(r,e,n){return{kind:r,value:e,error:n}}var E=null;function Yr(r){if(g.useDeprecatedSynchronousErrorHandling){var e=!E;if(e&&(E={errorThrown:!1,error:null}),r(),e){var n=E,t=n.errorThrown,o=n.error;if(E=null,t)throw o}}else r()}function Dr(r){g.useDeprecatedSynchronousErrorHandling&&E&&(E.errorThrown=!0,E.error=r)}var $=function(r){(0,f.ZT)(e,r);function e(n){var t=r.call(this)||this;return t.isStopped=!1,n?(t.destination=n,rr(n)&&n.add(t)):t.destination=Zr,t}return e.create=function(n,t,o){return new Z(n,t,o)},e.prototype.next=function(n){this.isStopped?G(jr(n),this):this._next(n)},e.prototype.error=function(n){this.isStopped?G(Rr(n),this):(this.isStopped=!0,this._error(n))},e.prototype.complete=function(){this.isStopped?G(Mr,this):(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(n){this.destination.next(n)},e.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(D),Hr=Function.prototype.bind;function B(r,e){return Hr.call(r,e)}var $r=function(){function r(e){this.partialObserver=e}return r.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(t){M(t)}},r.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(t){M(t)}else M(e)},r.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(n){M(n)}},r}(),Z=function(r){(0,f.ZT)(e,r);function e(n,t,o){var i=r.call(this)||this,u;if(s(n)||!n)u={next:n!=null?n:void 0,error:t!=null?t:void 0,complete:o!=null?o:void 0};else{var a;i&&g.useDeprecatedNextContext?(a=Object.create(n),a.unsubscribe=function(){return i.unsubscribe()},u={next:n.next&&B(n.next,a),error:n.error&&B(n.error,a),complete:n.complete&&B(n.complete,a)}):u=n}return i.destination=new $r(u),i}return e}($);function M(r){g.useDeprecatedSynchronousErrorHandling?Dr(r):nr(r)}function Br(r){throw r}function G(r,e){var n=g.onStoppedNotification;n&&F.setTimeout(function(){return n(r,e)})}var Zr={closed:!0,next:tr,error:Br,complete:tr},W=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function X(r){return r}function $e(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return or(r)}function or(r){return r.length===0?X:r.length===1?r[0]:function(n){return r.reduce(function(t,o){return o(t)},n)}}var y=function(){function r(e){e&&(this._subscribe=e)}return r.prototype.lift=function(e){var n=new r;return n.source=this,n.operator=e,n},r.prototype.subscribe=function(e,n,t){var o=this,i=Wr(e)?e:new Z(e,n,t);return Yr(function(){var u=o,a=u.operator,c=u.source;i.add(a?a.call(i,c):c?o._subscribe(i):o._trySubscribe(i))}),i},r.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},r.prototype.forEach=function(e,n){var t=this;return n=ir(n),new n(function(o,i){var u=new Z({next:function(a){try{e(a)}catch(c){i(c),u.unsubscribe()}},error:i,complete:o});t.subscribe(u)})},r.prototype._subscribe=function(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)},r.prototype[W]=function(){return this},r.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return or(e)(this)},r.prototype.toPromise=function(e){var n=this;return e=ir(e),new e(function(t,o){var i;n.subscribe(function(u){return i=u},function(u){return o(u)},function(){return t(i)})})},r.create=function(e){return new r(e)},r}();function ir(r){var e;return(e=r!=null?r:g.Promise)!==null&&e!==void 0?e:Promise}function Gr(r){return r&&s(r.next)&&s(r.error)&&s(r.complete)}function Wr(r){return r&&r instanceof $||Gr(r)&&rr(r)}function ur(r){return s(r[W])}function ar(r){return Symbol.asyncIterator&&s(r==null?void 0:r[Symbol.asyncIterator])}function cr(r){return new TypeError("You provided "+(r!==null&&typeof r=="object"?"an invalid object":"'"+r+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function Xr(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var sr=Xr();function fr(r){return s(r==null?void 0:r[sr])}function lr(r){return(0,f.FC)(this,arguments,function(){var n,t,o,i;return(0,f.Jh)(this,function(u){switch(u.label){case 0:n=r.getReader(),u.label=1;case 1:u.trys.push([1,,9,10]),u.label=2;case 2:return[4,(0,f.qq)(n.read())];case 3:return t=u.sent(),o=t.value,i=t.done,i?[4,(0,f.qq)(void 0)]:[3,5];case 4:return[2,u.sent()];case 5:return[4,(0,f.qq)(o)];case 6:return[4,u.sent()];case 7:return u.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function vr(r){return s(r==null?void 0:r.getReader)}function A(r){if(r instanceof y)return r;if(r!=null){if(ur(r))return Jr(r);if(j(r))return Kr(r);if(q(r))return Qr(r);if(ar(r))return dr(r);if(fr(r))return kr(r);if(vr(r))return Vr(r)}throw cr(r)}function Jr(r){return new y(function(e){var n=r[W]();if(s(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Kr(r){return new y(function(e){for(var n=0;n<r.length&&!e.closed;n++)e.next(r[n]);e.complete()})}function Qr(r){return new y(function(e){r.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,nr)})}function kr(r){return new y(function(e){var n,t;try{for(var o=(0,f.XA)(r),i=o.next();!i.done;i=o.next()){var u=i.value;if(e.next(u),e.closed)return}}catch(a){n={error:a}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(n)throw n.error}}e.complete()})}function dr(r){return new y(function(e){zr(r,e).catch(function(n){return e.error(n)})})}function Vr(r){return dr(lr(r))}function zr(r,e){var n,t,o,i;return(0,f.mG)(this,void 0,void 0,function(){var u,a;return(0,f.Jh)(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=(0,f.KL)(r),c.label=1;case 1:return[4,n.next()];case 2:if(t=c.sent(),!!t.done)return[3,4];if(u=t.value,e.next(u),e.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=c.sent(),o={error:a},[3,11];case 6:return c.trys.push([6,,9,10]),t&&!t.done&&(i=n.return)?[4,i.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function Nr(r){return s(r==null?void 0:r.lift)}function x(r){return function(e){if(Nr(e))return e.lift(function(n){try{return r(n,this)}catch(t){this.error(t)}});throw new TypeError("Unable to lift unknown Observable type")}}function P(r,e,n,t,o){return new qr(r,e,n,t,o)}var qr=function(r){(0,f.ZT)(e,r);function e(n,t,o,i,u,a){var c=r.call(this,n)||this;return c.onFinalize=u,c.shouldUnsubscribe=a,c._next=t?function(l){try{t(l)}catch(h){n.error(h)}}:r.prototype._next,c._error=i?function(l){try{i(l)}catch(h){n.error(h)}finally{this.unsubscribe()}}:r.prototype._error,c._complete=o?function(){try{o()}catch(l){n.error(l)}finally{this.unsubscribe()}}:r.prototype._complete,c}return e.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var t=this.closed;r.prototype.unsubscribe.call(this),!t&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},e}($);function T(r,e){return x(function(n,t){var o=0;n.subscribe(P(t,function(i){t.next(r.call(e,i,o++))}))})}function S(r,e,n,t,o){t===void 0&&(t=0),o===void 0&&(o=!1);var i=e.schedule(function(){n(),o?r.add(this.schedule(null,t)):this.unsubscribe()},t);if(r.add(i),!o)return i}function _r(r,e,n,t,o,i,u,a){var c=[],l=0,h=0,w=!1,m=function(){w&&!c.length&&!l&&e.complete()},p=function(d){return l<t?U(d):c.push(d)},U=function(d){i&&e.next(d),l++;var Er=!1;A(n(d,h++)).subscribe(P(e,function(L){o==null||o(L),i?p(L):e.next(L)},function(){Er=!0},void 0,function(){if(Er)try{l--;for(var L=function(){var R=c.shift();u?S(e,u,function(){return U(R)}):U(R)};c.length&&l<t;)L();m()}catch(R){e.error(R)}}))};return r.subscribe(P(e,p,function(){w=!0,m()})),function(){a==null||a()}}function J(r,e,n){return n===void 0&&(n=1/0),s(e)?J(function(t,o){return T(function(i,u){return e(t,i,o,u)})(A(r(t,o)))},n):(typeof e=="number"&&(n=e),x(function(t,o){return _r(t,o,r,n)}))}var re=Array.isArray;function ee(r,e){return re(e)?r.apply(void 0,(0,f.ev)([],(0,f.CR)(e))):r(e)}function ne(r){return T(function(e){return ee(r,e)})}var te=["addListener","removeListener"],oe=["addEventListener","removeEventListener"],ie=["on","off"];function I(r,e,n,t){if(s(n)&&(t=n,n=void 0),t)return I(r,e,n).pipe(ne(t));var o=(0,f.CR)(ce(r)?oe.map(function(a){return function(c){return r[a](e,c,n)}}):ue(r)?te.map(hr(r,e)):ae(r)?ie.map(hr(r,e)):[],2),i=o[0],u=o[1];if(!i&&j(r))return J(function(a){return I(a,e,n)})(A(r));if(!i)throw new TypeError("Invalid event target");return new y(function(a){var c=function(){for(var l=[],h=0;h<arguments.length;h++)l[h]=arguments[h];return a.next(1<l.length?l:l[0])};return i(c),function(){return u(c)}})}function hr(r,e){return function(n){return function(t){return r[n](e,t)}}}function ue(r){return s(r.addListener)&&s(r.removeListener)}function ae(r){return s(r.on)&&s(r.off)}function ce(r){return s(r.addEventListener)&&s(r.removeEventListener)}function se(r,e){return e===void 0&&(e=X),r=r!=null?r:fe,x(function(n,t){var o,i=!0;n.subscribe(P(t,function(u){var a=e(u);(i||!r(o,a))&&(i=!1,o=a,t.next(u))}))})}function fe(r,e){return r===e}function pr(r){return r===void 0&&(r=1/0),J(X,r)}function le(){return pr(1)}function ve(r){return r&&s(r.schedule)}function K(r){return r[r.length-1]}function Be(r){return isFunction(K(r))?r.pop():void 0}function Q(r){return ve(K(r))?r.pop():void 0}function de(r,e){return typeof K(r)=="number"?r.pop():e}function yr(r,e){return e===void 0&&(e=0),x(function(n,t){n.subscribe(P(t,function(o){return S(t,r,function(){return t.next(o)},e)},function(){return S(t,r,function(){return t.complete()},e)},function(o){return S(t,r,function(){return t.error(o)},e)}))})}function mr(r,e){return e===void 0&&(e=0),x(function(n,t){t.add(r.schedule(function(){return n.subscribe(t)},e))})}function he(r,e){return A(r).pipe(mr(e),yr(e))}function pe(r,e){return A(r).pipe(mr(e),yr(e))}function ye(r,e){return new y(function(n){var t=0;return e.schedule(function(){t===r.length?n.complete():(n.next(r[t++]),n.closed||this.schedule())})})}function me(r,e){return new y(function(n){var t;return S(n,e,function(){t=r[sr](),S(n,e,function(){var o,i,u;try{o=t.next(),i=o.value,u=o.done}catch(a){n.error(a);return}u?n.complete():n.next(i)},0,!0)}),function(){return s(t==null?void 0:t.return)&&t.return()}})}function br(r,e){if(!r)throw new Error("Iterable cannot be null");return new y(function(n){S(n,e,function(){var t=r[Symbol.asyncIterator]();S(n,e,function(){t.next().then(function(o){o.done?n.complete():n.next(o.value)})},0,!0)})})}function be(r,e){return br(lr(r),e)}function Se(r,e){if(r!=null){if(ur(r))return he(r,e);if(j(r))return ye(r,e);if(q(r))return pe(r,e);if(ar(r))return br(r,e);if(fr(r))return me(r,e);if(vr(r))return be(r,e)}throw cr(r)}function Sr(r,e){return e?Se(r,e):A(r)}function wr(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return le()(Sr(r,Q(r)))}function we(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var n=Q(r);return x(function(t,o){(n?wr(r,t,n):wr(r,t)).subscribe(o)})}var gr=new y(function(r){return r.complete()});function Ze(r){return r?ge(r):gr}function ge(r){return new Observable(function(e){return r.schedule(function(){return e.complete()})})}function Ee(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var n=Q(r),t=de(r,1/0),o=r;return o.length?o.length===1?A(o[0]):pr(t)(Sr(o,n)):gr}var Ae=I(document,"mousemove").pipe(se(),T(function(r){return{x:r.clientX,y:r.clientY}}),we({x:-100,y:-100})),xe=Ee(I(document,"visibilitychange").pipe(T(function(){return document.visibilityState})),I(window,"focus").pipe(T(function(){return document.visibilityState})),I(window,"blur").pipe(T(function(){return"hidden"}))),Te=function(e){var n=e.onMouseMove,t=e.onBlur;(0,C.useEffect)(function(){var o=Ae.subscribe(n),i=xe.subscribe(t);return function(){o.unsubscribe(),i.unsubscribe()}},[])},Ie=function(e,n){var t=(0,Or.createWithEqualityFn)(function(u){return{provider:e,awareness:e.awareness,currentUser:O()({id:(0,Ur.x0)()},n),awarenessStates:[],setFollowUser:function(c){u({followUser:c})}}},N()),o=t.getState(),i=o.awareness;return Te({onMouseMove:function(a){i.setLocalStateField("cursor",a)},onBlur:function(a){i.setLocalStateField("active",a==="visible")}}),(0,C.useEffect)(function(){i.on("change",function(){var u=Array.from(i.getStates().values());t.setState(function(a){return O()(O()({},a),{},{awarenessStates:u})})}),i.setLocalStateField("user",t.getState().currentUser),i.setLocalStateField("active",!0)},[]),t},k=(0,Lr.k)(),V=k.useStore,Ce=k.Provider,Ge=k.useStoreApi,Pe=v(14632),b=v(52676),Ue=function(e){var n=e.id,t=e.name,o=e.color,i=e.active,u=V(function(p){return[p.followUser,p.currentUser,p.setFollowUser]},Cr.shallow),a=Tr()(u,3),c=a[0],l=a[1],h=a[2],w=l===n,m=c&&c===n;return(0,b.jsx)(Pe.Z,{name:t,current:w,following:m,color:o,active:i,onClick:function(){w||h(m?void 0:n)}})},Le=(0,C.memo)(function(){var r=V(function(e){return e.awarenessStates});return(0,b.jsx)(Ir.C.Group,{children:r==null?void 0:r.filter(Boolean).map(function(e,n){var t=e.user,o=e.active;return(0,b.jsx)(Ue,O()({active:o},t),"".concat(t==null?void 0:t.id,"-").concat(n))})})}),Oe=Le,Fe=v(58591),Me=(0,C.memo)(function(){var r=V(function(e){var n;return(n=e.awarenessStates)===null||n===void 0?void 0:n.filter(function(t){return t.active&&t.user.id!==e.currentUser.id})},N());return(0,b.jsx)(b.Fragment,{children:r==null?void 0:r.map(function(e){var n=e.cursor,t=e.user;return(0,b.jsx)(Fe.Z,{position:n,color:t.color,name:t.name},t.id)})})}),Re=Me,je=(0,C.memo)(function(r){var e=r.provider,n=r.avatars,t=n===void 0?!0:n,o=r.cursors,i=o===void 0?!0:o,u=r.user;return(0,b.jsxs)(Ce,{createStore:function(){return Ie(e,u)},children:[i&&(0,b.jsx)(Re,{}),t&&(0,b.jsx)(Oe,{})]})}),Ye=je}}]);
