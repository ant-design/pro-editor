"use strict";(self.webpackChunk_ant_design_pro_editor=self.webpackChunk_ant_design_pro_editor||[]).push([[5356],{48065:function(t,e,n){n.r(e),n.d(e,{tableColumnValueOptions:function(){return u}});var u=[{label:"index",value:"index"},{label:"indexBorder",value:"indexBorder"},{label:"digit",value:"digit"},{label:"password",value:"password"},{label:"money",value:"money"},{label:"text",value:"text"},{label:"textarea",value:"textarea"},{label:"date",value:"date"},{label:"option",value:"option"},{label:"dateTime",value:"dateTime"},{label:"dateWeek",value:"dateWeek"},{label:"dateMonth",value:"dateMonth"},{label:"dateQuarter",value:"dateQuarter"},{label:"dateYear",value:"dateYear"},{label:"dateRange",value:"dateRange"},{label:"dateTimeRange",value:"dateTimeRange"},{label:"time",value:"time"},{label:"timeRange",value:"timeRange"},{label:"select",value:"select"},{label:"checkbox",value:"checkbox"},{label:"rate",value:"rate"},{label:"radio",value:"radio"},{label:"radioButton",value:"radioButton"},{label:"progress",value:"progress"},{label:"percent",value:"percent"},{label:"second",value:"second"},{label:"avatar",value:"avatar"},{label:"code",value:"code"},{label:"switch",value:"switch"},{label:"fromNow",value:"fromNow"},{label:"image",value:"image"},{label:"jsonCode",value:"jsonCode"},{label:"color",value:"color"}]},87917:function(t,e,n){n.r(e);var u=n(95095),o=n(77475),a=n(57820),l=n(3630),f=n(14909),s=n(90142),r=n(97117),c=n(68339),i=n(52676),E=function(){var v=(0,c.useStore)(),h=v.data,g=v.plus,m=v.tabs,P=v.switchTabs,d=v.plusWithoutHistory,C=(0,f.Fg)();return(0,i.jsxs)(s.D,{padding:16,style:{background:C.colorBgLayout},children:[(0,i.jsx)(r.default,{}),(0,i.jsx)(u.Z,{}),(0,i.jsxs)(s.D,{gap:12,children:[(0,i.jsxs)(o.Z,{title:"\u5386\u53F2\u8BB0\u5F55\u91CC\u7684\u6570\u636E",children:[(0,i.jsx)(a.ZP,{onClick:g,children:"+1"}),(0,i.jsxs)("div",{children:["data: ",h]})]}),(0,i.jsx)(o.Z,{title:"\u4E0D\u5728\u5386\u53F2\u8BB0\u5F55\u91CC\u7684\u6570\u636E",children:(0,i.jsxs)("div",{children:[(0,i.jsx)(l.Z,{activeKey:m,onChange:P,items:[{key:"1",label:"\u6570\u636E"},{key:"2",label:"\u914D\u7F6E"}]}),(0,i.jsx)("div",{children:"\u4E0B\u9762\u7684 +2 \u53EF\u4F7F\u5F97 \u5728\u5386\u53F2\u8BB0\u5F55\u5916\u6DFB\u52A0\u8BA9 data +2 "}),(0,i.jsx)(a.ZP,{onClick:d,children:"+2"})]})})]})]})};e.default=E},97117:function(t,e,n){n.r(e);var u=n(99126),o=n(2886),a=n(98336),l=n(91976),f=n(57820),s=n(90142),r=n(52676),c=function(){var E,_,v=(0,a.E)(),h=v.undo,g=v.redo,m=v.undoStack,P=v.redoStack,d=m(),C=P(),p=d.at(-1);return(0,r.jsxs)(s.D,{padding:12,gap:8,children:[(0,r.jsxs)(s.D,{horizontal:!0,gap:8,children:[(0,r.jsx)(l.Z,{count:d.length,children:(0,r.jsx)(f.ZP,{icon:(0,r.jsx)(u.Z,{}),onClick:h,disabled:d.length===0,children:"\u64A4\u9500"})}),(0,r.jsx)(l.Z,{count:C.length,children:(0,r.jsx)(f.ZP,{icon:(0,r.jsx)(o.Z,{}),onClick:g,disabled:C.length===0,children:"\u91CD\u505A"})})]}),(0,r.jsxs)(s.D,{children:["\u4E0A\u6B21\u64CD\u4F5C\u65F6\u95F4:",p?new Date(p.timestamp).toLocaleTimeString():"-"]}),(0,r.jsxs)(s.D,{children:["\u4E0A\u6B21\u64CD\u4F5C\u540D\u79F0:",(E=p==null?void 0:p.name)!==null&&E!==void 0?E:"-"]})," ",(0,r.jsxs)(s.D,{children:["\u4E0A\u6B21\u64CD\u4F5C\u7C7B\u578B:",(_=p==null?void 0:p.type)!==null&&_!==void 0?_:"-"]})]})};e.default=c},68339:function(t,e,n){n.r(e),n.d(e,{useStore:function(){return i}});var u=n(26068),o=n.n(u),a=n(56621),l=n(41750),f=n(46268),s=function(_,v){return{tabs:"1",switchTabs:function(g){_({tabs:g})},plusWithoutHistory:function(){_(function(g){return o()(o()({},g),{},{data:g.data+2})},!1,{type:"plusWithoutHistory",recordHistory:!1})},plus:function(){var g=v().data+1;_({data:g},!1,{type:"plus",payload:g,name:"+1"})},data:3}},r="redo-demo-app",c={name:r,partialize:function(_){return{data:_.data}}},i=(0,l.create)()((0,f.devtools)((0,a.l)((0,f.subscribeWithSelector)(s),c),{name:r}));i.subscribe(function(E){return E.data},console.log)},69472:function(t,e,n){n.r(e),n.d(e,{ButtonComponent:function(){return i}});var u=n(26068),o=n.n(u),a=n(41003),l=n(57820),f=n(3341),s=n.n(f),r=n(75271),c=n(52676),i=(0,r.memo)(function(){var E=(0,a.oR)(function(_){return _.config},s());return console.log(E),(0,c.jsx)(l.ZP,o()({},E))})},1253:function(t,e,n){n.r(e),n.d(e,{ButtonPanel:function(){return P}});var u=n(48305),o=n.n(u),a=n(99126),l=n(2886),f=n(34132),s=n(41003),r=n(95095),c=n(57820),i=n(3341),E=n.n(i),_=n(75271),v=n(90142),h=n(16665),g=n(41639),m=n(52676),P=(0,_.memo)(function(){var d=(0,s.oR)(function(b){return b.config},E()),C=(0,s.oR)(function(b){return[b.setConfig,b.undo,b.redo,b.undoStack().length,b.redoStack().length]},h.shallow),p=o()(C,5),x=p[0],O=p[1],D=p[2],B=p[3],y=p[4];return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(f.Z,{schema:g.buttonModel.schema(),onChange:function(S,M){x(M,{replace:!0})},value:d,title:"Button"}),(0,m.jsx)(r.Z,{}),(0,m.jsxs)(v.D,{horizontal:!0,gap:4,align:"center",padding:8,children:["\u9884\u8BBE\uFF1A",(0,m.jsx)(c.ZP,{onClick:function(){x({children:"\u9ED8\u8BA4\u6309\u94AE",type:"default"},{replace:!0})},children:"\u9ED8\u8BA4\u6309\u94AE"}),(0,m.jsx)(c.ZP,{onClick:function(){x({children:"\u4E3B\u8981\u6309\u94AE",size:"small",type:"primary"},{replace:!0})},children:"\u4E3B\u8981\u6309\u94AE"}),(0,m.jsx)(c.ZP,{onClick:function(){x({children:"\u5371\u9669\u6309\u94AE",type:"dashed",danger:!0,size:"large",ghost:!0,shape:"round"},{replace:!0})},children:"\u5371\u9669\u6309\u94AE"})]}),(0,m.jsx)(r.Z,{}),(0,m.jsxs)(v.D,{horizontal:!0,padding:12,gap:8,children:[(0,m.jsx)(c.ZP,{icon:(0,m.jsx)(a.Z,{}),onClick:O,disabled:B===0,children:(0,m.jsx)(v.D,{style:{display:"inline-flex"},horizontal:!0,gap:4,children:(0,m.jsx)("div",{children:"\u64A4\u9500"})})}),(0,m.jsx)(c.ZP,{icon:(0,m.jsx)(l.Z,{}),onClick:D,disabled:y===0,children:"\u91CD\u505A"})]})]})})},67721:function(t,e,n){n.r(e);var u=n(26068),o=n.n(u),a=n(7447),l=n(95878),f=n.n(l),s=n(55116),r=`
import { Button } from 'antd';

export default () => <%= component %>;
`,c=f()(r),i=function(_){var v=c({component:(0,a.vq)("Button",o()({},_))});return(0,s.prettier)(v)};e.default=i},55116:function(t,e,n){n.r(e),n.d(e,{prettier:function(){return u}});var u=function(a){var l="";try{var f=n(77192),s=[n(70775)];l=f.format(a,{parser:"typescript",plugins:s,semi:!0,singleQuote:!0,printWidth:100,trailingComma:"all",proseWrap:"never",endOfLine:"lf"})}catch(r){console.error("err",r),l=`\u4EE3\u7801\u683C\u5F0F\u5316\u5931\u8D25\uFF0C\u683C\u5F0F\u5316\u524D\u4E3A:
 `.concat(a)}return l}},5782:function(t,e,n){n.r(e),n.d(e,{buttonAssetParams:function(){return s}});var u=n(69472),o=n(1253),a=n(67721),l=n(41639),f=n(98145),s={id:"Button",createStore:f.createStore,ui:{rules:[],Component:u.ButtonComponent,ConfigPanel:o.ButtonPanel},models:[l.buttonModel],defaultConfig:{children:"\u9ED8\u8BA4\u6309\u94AE"},storeOptions:{devtools:{name:"ButtonAssetStore"}},codeEmitter:a.default}},41639:function(t,e,n){n.r(e),n.d(e,{buttonModel:function(){return o},buttonSchema:function(){return u}});var u={type:"object",properties:{children:{type:"string",description:"\u8BBE\u7F6E\u6309\u94AE\u6587\u672C",title:"\u6587\u672C",renderProps:{allowClear:!0,placeholder:"\u7A7A\u503C\u5C06\u65E0\u6CD5\u6B63\u5E38\u663E\u793A",autoFocus:!0}},type:{type:"string",title:"\u7C7B\u578B",renderType:"radioGroup",default:"default",enum:["primary","default","dashed","link","text"],enumNames:["\u5F3A\u8C03","\u9ED8\u8BA4","\u865A\u7EBF","\u94FE\u63A5","\u6587\u672C"],renderOptions:{layout:"vertical",noLabel:!0}},danger:{type:"boolean",renderType:"boolean",title:"\u5371\u9669\u6001",default:!1},icon:{type:"string",title:"\u56FE\u6807",default:""},size:{title:"\u5927\u5C0F",type:"string",renderType:"radioGroup",enum:["large","middle","small"],enumNames:["\u5927","\u4E2D","\u5C0F"],default:"middle",category:"style"},shape:{title:"\u5F62\u72B6",type:"string",renderType:"radioGroup",enumOptions:[{label:"\u9ED8\u8BA4"},{label:"\u5706\u5F62",value:"circle"},{label:"\u80F6\u56CA",value:"round"}],category:"style",renderOptions:{}},loading:{type:"boolean",renderType:"boolean",title:"\u52A0\u8F7D\u4E2D",default:!1,category:"status"},disabled:{type:"boolean",renderType:"boolean",title:"\u7981\u7528",default:!1,category:"status"},ghost:{type:"boolean",renderType:"boolean",title:"\u5E7D\u7075\u6309\u94AE",default:!1,category:"style"}}},o={key:"content",schema:function(){return u},emitter:function(l){return{icon:l.content.text,children:l.content.text}}}},98145:function(t,e,n){n.r(e),n.d(e,{createStore:function(){return o},useStore:function(){return l}});var u=n(42750),o=function(){return{}},a=(0,u.I)(),l=a.useStore},20173:function(t,e,n){n.r(e),n.d(e,{SessionForm:function(){return i}});var u=n(48305),o=n.n(u),a=n(86323),l=n(26916),f=n(67685),s=n(91540),r=n(75271),c=n(52676),i=function(_){var v=_.open,h=_.onCreate,g=_.onCancel,m=a.Z.useForm(),P=o()(m,1),d=P[0];return(0,c.jsx)(l.Z,{open:v,title:"Join Session",okText:"Join",onCancel:g,onOk:function(){d.validateFields().then(function(p){var x=p.color,O=p.name;d.resetFields();var D=typeof x=="string"?x:x==null?void 0:x.toHexString();h({color:D,name:O})}).catch(function(p){console.log("Validate Failed:",p)})},children:(0,c.jsxs)(a.Z,{form:d,layout:"vertical",name:"form_in_modal",initialValues:{color:"#1677FF"},children:[(0,c.jsx)(a.Z.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Please input your name"}],children:(0,c.jsx)(f.Z,{})}),(0,c.jsx)(a.Z.Item,{name:"color",label:"Color",rules:[{required:!0,message:"Please select your color"}],children:(0,c.jsx)(s.Z,{format:"hex"})})]})})}},89437:function(t,e,n){n.r(e),n.d(e,{Provider:function(){return h},createStore:function(){return E},doc:function(){return i},useStore:function(){return v}});var u=n(26068),o=n.n(u),a=n(2195),l=n(3341),f=n.n(l),s=n(24505),r=n(97412),c=n(79258),i=new s.Doc,E=function(){return(0,c.createWithEqualityFn)((0,a.Z)(i,"shared",function(m){return{count:0,text:"",users:[],increment:function(){return m(function(d){return o()(o()({},d),{},{count:d.count+1})})},updateText:function(d){return m(function(C){return o()(o()({},C),{},{text:d})})}}}),f())},_=(0,r.k)(),v=_.useStore,h=_.Provider},79557:function(t,e,n){n.r(e),n.d(e,{contentModel:function(){return h},createStore:function(){return l},demoAssets:function(){return m},dynamicContentModel:function(){return g},useStore:function(){return s}});var u=n(26068),o=n.n(u),a=n(42750),l=function(d,C){return{content:{text:"123",icon:""},setText:function(x){var O=C(),D=O.content;d({content:o()(o()({},D),{},{text:x})})}}},f=(0,a.I)(),s=f.useStore,r=n(52676),c=function(d){var C=d.id,p=s(),x=p.content,O=p.setText;return(0,r.jsx)("button",{type:"button","data-testid":C,onClick:function(){O("clicked")},children:x.text})},i=function(d){var C=d.id,p=C===void 0?"component":C;return(0,r.jsx)(c,{id:p})},E=function(){var d=s(),C=d.content;return(0,r.jsx)("div",{"data-testid":"panel",children:C.text})},_=E,v={type:"object",properties:{text:{type:"string",title:"\u6587\u672C"},icon:{type:"string",title:"\u56FE\u6807",default:""}}},h={key:"content",schema:function(){return v},emitter:function(d){return{icon:d.content.text,children:d.content.text}}},g=o()(o()({},h),{},{schema:function(d){return{type:"object",properties:{text:{type:"string",title:"\u6587\u672C",default:d==="prod"?"prod":"dev"},icon:{type:"string",title:"\u56FE\u6807",default:""}}}}}),m={id:"Button",createStore:l,ui:{Component:i,ConfigPanel:_,rules:[]},models:[h],codeEmitter:function(){return""}}},88452:function(t,e){e.Z=`/*
 * Column \u6240\u6709\u7C7B\u578B
 * */
export const tableColumnValueOptions = [
  { label: 'index', value: 'index' },
  { label: 'indexBorder', value: 'indexBorder' },
  { label: 'digit', value: 'digit' },
  { label: 'password', value: 'password' },
  { label: 'money', value: 'money' },
  { label: 'text', value: 'text' },
  { label: 'textarea', value: 'textarea' },
  { label: 'date', value: 'date' },
  { label: 'option', value: 'option' },
  { label: 'dateTime', value: 'dateTime' },
  { label: 'dateWeek', value: 'dateWeek' },
  { label: 'dateMonth', value: 'dateMonth' },
  { label: 'dateQuarter', value: 'dateQuarter' },
  { label: 'dateYear', value: 'dateYear' },
  { label: 'dateRange', value: 'dateRange' },
  { label: 'dateTimeRange', value: 'dateTimeRange' },
  { label: 'time', value: 'time' },
  { label: 'timeRange', value: 'timeRange' },
  { label: 'select', value: 'select' },
  { label: 'checkbox', value: 'checkbox' },
  { label: 'rate', value: 'rate' },
  { label: 'radio', value: 'radio' },
  { label: 'radioButton', value: 'radioButton' },
  { label: 'progress', value: 'progress' },
  { label: 'percent', value: 'percent' },
  { label: 'second', value: 'second' },
  { label: 'avatar', value: 'avatar' },
  { label: 'code', value: 'code' },
  { label: 'switch', value: 'switch' },
  { label: 'fromNow', value: 'fromNow' },
  { label: 'image', value: 'image' },
  { label: 'jsonCode', value: 'jsonCode' },
  { label: 'color', value: 'color' },
];
`},18451:function(t,e){e.Z=`import type { ColumnItemList } from '@ant-design/pro-editor';
import { ColumnList } from '@ant-design/pro-editor';
import { useState } from 'react';

import { tableColumnValueOptions } from './data';

type SchemaItem = {
  title: string;
  valueType: string;
  dataIndex: string;
};

const INIT_VALUES = [
  { title: 'Index', valueType: 'indexBorder', dataIndex: 'index' },
  {
    title: 'Enterprise',
    valueType: 'text',
    dataIndex: 'name',
  },
  { title: 'Company', valueType: 'text', dataIndex: 'authCompany' },
];

const columns: ColumnItemList<SchemaItem> = [
  {
    title: 'Title',
    dataIndex: 'title',
    type: 'input',
  },
  {
    title: 'ValueType',
    dataIndex: 'valueType',
    type: 'select',
    options: tableColumnValueOptions,
  },
  {
    title: 'DataIndex',
    dataIndex: 'dataIndex',
    type: 'select',
  },
];

export default () => {
  const [value, setValue] = useState(INIT_VALUES);

  return (
    <ColumnList
      columns={columns}
      value={value}
      onChange={(values) => {
        setValue(values);
        console.log('onChange', values);
      }}
    />
  );
};
`},39682:function(t,e){e.Z=`import { Button, Card, Divider, Tabs } from 'antd';
import { useTheme } from 'antd-style';
import { Flexbox } from 'react-layout-kit';

import Toolbar from './Toolbar';
import { useStore } from './store';

const App = () => {
  const { data, plus, tabs, switchTabs, plusWithoutHistory } = useStore();

  const theme = useTheme();

  return (
    <Flexbox padding={16} style={{ background: theme.colorBgLayout }}>
      <Toolbar />
      <Divider />
      <Flexbox gap={12}>
        <Card title={'\u5386\u53F2\u8BB0\u5F55\u91CC\u7684\u6570\u636E'}>
          <Button onClick={plus}>+1</Button>

          <div>data: {data}</div>
        </Card>
        <Card title={'\u4E0D\u5728\u5386\u53F2\u8BB0\u5F55\u91CC\u7684\u6570\u636E'}>
          <div>
            <Tabs
              activeKey={tabs}
              onChange={switchTabs}
              items={[
                { key: '1', label: '\u6570\u636E' },
                { key: '2', label: '\u914D\u7F6E' },
              ]}
            />

            <div>\u4E0B\u9762\u7684 +2 \u53EF\u4F7F\u5F97 \u5728\u5386\u53F2\u8BB0\u5F55\u5916\u6DFB\u52A0\u8BA9 data +2 </div>
            <Button onClick={plusWithoutHistory}>+2</Button>
          </div>
        </Card>
      </Flexbox>
    </Flexbox>
  );
};

export default App;
`},18807:function(t,e){e.Z=`import { RedoOutlined, UndoOutlined } from '@ant-design/icons';
import { useProEditor } from '@ant-design/pro-editor';
import { Badge, Button } from 'antd';
import { Flexbox } from 'react-layout-kit';

const Toolbar = () => {
  const { undo, redo, undoStack, redoStack } = useProEditor();

  const undoStackList = undoStack();
  const redoStackList = redoStack();

  const lastAction = undoStackList.at(-1);

  return (
    <Flexbox padding={12} gap={8}>
      <Flexbox horizontal gap={8}>
        <Badge count={undoStackList.length}>
          <Button icon={<UndoOutlined />} onClick={undo} disabled={undoStackList.length === 0}>
            \u64A4\u9500
          </Button>
        </Badge>

        <Badge count={redoStackList.length}>
          <Button icon={<RedoOutlined />} onClick={redo} disabled={redoStackList.length === 0}>
            \u91CD\u505A
          </Button>
        </Badge>
      </Flexbox>
      <Flexbox>
        \u4E0A\u6B21\u64CD\u4F5C\u65F6\u95F4:
        {lastAction ? new Date(lastAction.timestamp).toLocaleTimeString() : '-'}
      </Flexbox>
      <Flexbox>
        \u4E0A\u6B21\u64CD\u4F5C\u540D\u79F0:
        {lastAction?.name ?? '-'}
      </Flexbox>{' '}
      <Flexbox>
        \u4E0A\u6B21\u64CD\u4F5C\u7C7B\u578B:
        {lastAction?.type ?? '-'}
      </Flexbox>
    </Flexbox>
  );
};

export default Toolbar;
`},25551:function(t,e){e.Z=`import { ProEditorProvider } from '@ant-design/pro-editor';
import App from './App';

import { useStore } from './store';

export default () => {
  return (
    <ProEditorProvider devtoolOptions={{ name: 'redo-pro-editor-store' }} store={[useStore]}>
      <App />
    </ProEditorProvider>
  );
};
`},39559:function(t,e){e.Z=`import { proEditorMiddleware, ProEditorOptions } from '@ant-design/pro-editor';
import { create, StateCreator } from 'zustand';
import { devtools, subscribeWithSelector } from 'zustand/middleware';

interface Store {
  tabs: string;
  plus: () => void;
  plusWithoutHistory: () => void;
  data: number;
  switchTabs: (key: string) => void;
}

const createStore: StateCreator<Store, [['zustand/devtools', never], ['pro-editor', never]]> = (
  set,
  get,
) => ({
  tabs: '1',
  switchTabs: (key) => {
    set({ tabs: key });
  },
  plusWithoutHistory: () => {
    set((s) => ({ ...s, data: s.data + 2 }), false, {
      type: 'plusWithoutHistory',
      recordHistory: false,
    });
  },

  plus: () => {
    const nextData = get().data + 1;

    set({ data: nextData }, false, {
      type: 'plus',
      payload: nextData,
      name: '+1',
    });
  },
  data: 3,
});

interface ProEditorStore {
  data: number;
}

const storeName = 'redo-demo-app';

const proEditorOptions: ProEditorOptions<Store, ProEditorStore> = {
  name: storeName,
  partialize: (s) => ({ data: s.data }),
};

export const useStore = create<Store>()(
  devtools(proEditorMiddleware(subscribeWithSelector(createStore), proEditorOptions), {
    name: storeName,
  }),
);

useStore.subscribe((s) => s.data, console.log);
`},36893:function(t,e){e.Z=`import { useProBuilderStore } from '@ant-design/pro-editor';
import { Button } from 'antd';
import isEqual from 'fast-deep-equal';
import { memo } from 'react';

export const ButtonComponent = memo(() => {
  const data = useProBuilderStore((s) => s.config, isEqual);

  console.log(data);
  return <Button {...data} />;
});
`},99563:function(t,e){e.Z=`import { RedoOutlined, UndoOutlined } from '@ant-design/icons';
import { LevaPanel } from '@ant-design/leva-panel';
import { useProBuilderStore } from '@ant-design/pro-editor';
import { Button, Divider } from 'antd';
import isEqual from 'fast-deep-equal';
import { FC, memo } from 'react';
import { Flexbox } from 'react-layout-kit';
import { shallow } from 'zustand/shallow';

import { ButtonConfig, buttonModel } from './models';

export const ButtonPanel: FC = memo(() => {
  const data = useProBuilderStore((s) => s.config, isEqual);
  const [updateConfig, undo, redo, undoStack, redoStack] = useProBuilderStore(
    (s) => [s.setConfig, s.undo, s.redo, s.undoStack().length, s.redoStack().length],
    shallow,
  );

  return (
    <>
      <LevaPanel<ButtonConfig>
        schema={buttonModel.schema()}
        onChange={(data, item) => {
          updateConfig(item, { replace: true });
        }}
        value={data}
        title={'Button'}
      />
      <Divider />
      <Flexbox horizontal gap={4} align={'center'} padding={8}>
        \u9884\u8BBE\uFF1A
        <Button
          onClick={() => {
            updateConfig({ children: '\u9ED8\u8BA4\u6309\u94AE', type: 'default' }, { replace: true });
          }}
        >
          \u9ED8\u8BA4\u6309\u94AE
        </Button>
        <Button
          onClick={() => {
            updateConfig(
              { children: '\u4E3B\u8981\u6309\u94AE', size: 'small', type: 'primary' },
              { replace: true },
            );
          }}
        >
          \u4E3B\u8981\u6309\u94AE
        </Button>
        <Button
          onClick={() => {
            updateConfig(
              {
                children: '\u5371\u9669\u6309\u94AE',
                type: 'dashed',
                danger: true,
                size: 'large',
                ghost: true,
                shape: 'round',
              },
              { replace: true },
            );
          }}
        >
          \u5371\u9669\u6309\u94AE
        </Button>
      </Flexbox>
      <Divider />
      <Flexbox horizontal padding={12} gap={8}>
        <Button icon={<UndoOutlined />} onClick={undo} disabled={undoStack === 0}>
          <Flexbox style={{ display: 'inline-flex' }} horizontal gap={4}>
            <div>\u64A4\u9500</div>
          </Flexbox>
        </Button>
        <Button icon={<RedoOutlined />} onClick={redo} disabled={redoStack === 0}>
          \u91CD\u505A
        </Button>
      </Flexbox>
    </>
  );
});
`},77004:function(t,e){e.Z=`import { generateJSXCode } from '@ant-design/pro-editor';
import template from 'lodash.template';
import { prettier } from './format';

const codeTemplate = \`
import { Button } from 'antd';

export default () => <%= component %>;
\`;

interface TemplateParams {
  iconDeps?: string;
  component: string;
}

const emitter: (params: TemplateParams) => string = template(codeTemplate);

const codeEmitter = (config) => {
  const code = emitter({
    component: generateJSXCode('Button', {
      ...config,
    }),
  });
  return prettier(code);
};

export default codeEmitter;
`},82147:function(t,e){e.Z=`export const prettier = (configCode: string) => {
  let prettierCode = '';
  try {
    const prettier = require('prettier');
    const plugins = [require('prettier/parser-typescript')];

    prettierCode = prettier.format(configCode, {
      parser: 'typescript',
      plugins,
      // \u4EE5\u4E0B\u53C2\u8003 Bigfish \u914D\u7F6E
      semi: true,
      singleQuote: true,
      printWidth: 100,
      trailingComma: 'all',
      proseWrap: 'never',
      endOfLine: 'lf',
    });
  } catch (err) {
    console.error('err', err);
    prettierCode = \`\u4EE3\u7801\u683C\u5F0F\u5316\u5931\u8D25\uFF0C\u683C\u5F0F\u5316\u524D\u4E3A:\\n \${configCode}\`;
  }
  return prettierCode;
};
`},62177:function(t,e){e.Z=`import type { ComponentAssetParams } from '@ant-design/pro-editor';
import { ButtonComponent } from './_Component';
import { ButtonPanel } from './_Panel';
import codeEmitter from './codeEmitter';
import { ButtonConfig, buttonModel } from './models';
import { createStore } from './store';

export const buttonAssetParams: ComponentAssetParams<ButtonConfig> = {
  id: 'Button',

  createStore,

  ui: {
    rules: [],
    Component: ButtonComponent,
    ConfigPanel: ButtonPanel,
  },

  models: [buttonModel],
  defaultConfig: {
    children: '\u9ED8\u8BA4\u6309\u94AE',
  },

  storeOptions: {
    devtools: { name: 'ButtonAssetStore' },
  },

  codeEmitter,
};
`},82522:function(t,e){e.Z=`import type { AssetConfigModel, JSONSchema } from '@ant-design/pro-editor';

export interface ButtonConfig {
  children?: string;
  type?: 'primary' | 'default' | 'dashed' | 'link' | 'text';
  size?: 'large' | 'middle' | 'small';
  danger?: boolean;
  ghost?: boolean;
  icon?: string;
  shape?: 'circle' | 'round';
}

/**
 * \u6309\u94AE Schema
 */
export const buttonSchema: JSONSchema<ButtonConfig> = {
  type: 'object',
  properties: {
    children: {
      type: 'string',
      description: '\u8BBE\u7F6E\u6309\u94AE\u6587\u672C',
      title: '\u6587\u672C',
      renderProps: {
        allowClear: true,
        placeholder: '\u7A7A\u503C\u5C06\u65E0\u6CD5\u6B63\u5E38\u663E\u793A',
        autoFocus: true,
      },
    },
    type: {
      type: 'string',
      title: '\u7C7B\u578B',
      renderType: 'radioGroup',
      default: 'default',
      enum: ['primary', 'default', 'dashed', 'link', 'text'],
      enumNames: ['\u5F3A\u8C03', '\u9ED8\u8BA4', '\u865A\u7EBF', '\u94FE\u63A5', '\u6587\u672C'],
      renderOptions: {
        layout: 'vertical',
        noLabel: true,
      },
    },
    danger: {
      type: 'boolean',
      renderType: 'boolean',
      title: '\u5371\u9669\u6001',
      default: false,
    },
    icon: {
      type: 'string',
      title: '\u56FE\u6807',
      default: '',
    },
    size: {
      title: '\u5927\u5C0F',
      type: 'string',
      renderType: 'radioGroup',
      enum: ['large', 'middle', 'small'],
      enumNames: ['\u5927', '\u4E2D', '\u5C0F'],
      default: 'middle',
      category: 'style',
    },
    shape: {
      title: '\u5F62\u72B6',
      type: 'string',
      renderType: 'radioGroup',
      enumOptions: [
        {
          label: '\u9ED8\u8BA4',
        },
        {
          label: '\u5706\u5F62',
          value: 'circle',
        },
        {
          label: '\u80F6\u56CA',
          value: 'round',
        },
      ],
      category: 'style',
      renderOptions: {},
    },
    loading: {
      type: 'boolean',
      renderType: 'boolean',
      title: '\u52A0\u8F7D\u4E2D',
      default: false,
      category: 'status',
    },
    disabled: {
      type: 'boolean',
      renderType: 'boolean',
      title: '\u7981\u7528',
      default: false,
      category: 'status',
    },
    ghost: {
      type: 'boolean',
      renderType: 'boolean',
      title: '\u5E7D\u7075\u6309\u94AE',
      default: false,
      category: 'style',
    },
  },
};

export const buttonModel: AssetConfigModel = {
  key: 'content',
  schema: () => buttonSchema,
  emitter: (config) => {
    return {
      icon: config.content.text,
      children: config.content.text,
    };
  },
};
`},63693:function(t,e){e.Z=`import { CreateAssetStore, createUseAssetStore } from '@ant-design/pro-editor';

// eslint-disable-next-line @typescript-eslint/no-empty-interface
export interface ButtonStore {}

const createStore: CreateAssetStore<ButtonStore> = () => ({});

const { useStore } = createUseAssetStore<ButtonStore>();

export { createStore, useStore };
`},69718:function(t,e){e.Z=`import { ComponentAsset, ProBuilder } from '@ant-design/pro-editor';
import { buttonAssetParams } from './buttonAsset';

const ButtonComponentAsset = new ComponentAsset(buttonAssetParams);

export default () => (
  <ProBuilder
    componentAsset={ButtonComponentAsset}
    style={{ height: 600 }}
    __EDITOR_STORE_DEVTOOLS__={{ name: 'ButtonEditor' }}
  />
);
`},36633:function(t,e){e.Z=`import { demoAssets } from '@/ComponentAsset/demoAssets';
import { AwarenessEditor, ComponentAsset, ProBuilder } from '@/index';
import { Highlight } from '@ant-design/pro-editor';
import { useLocalStorageState } from 'ahooks';
import { Flexbox } from 'react-layout-kit';

const assets = new ComponentAsset(demoAssets);

export default () => {
  const [presence, setPresence] = useLocalStorageState<AwarenessEditor>('DEMO-PRO-EDITOR');

  return (
    <Flexbox>
      <ProBuilder
        componentAsset={assets}
        editorAwareness={presence}
        onEditorAwarenessChange={setPresence}
        style={{ height: 'calc(100vh - 100px)' }}
      />
      <Flexbox>
        \u5F53\u524D\u89C6\u56FE\u72B6\u6001\uFF1A
        <Highlight>{JSON.stringify(presence, null, 2)}</Highlight>
      </Flexbox>
    </Flexbox>
  );
};
`},28536:function(t,e){e.Z=`import { demoAssets } from '@/ComponentAsset/demoAssets';
import { ComponentAsset, ProBuilder } from '@ant-design/pro-editor';

export default () => (
  <ProBuilder
    componentAsset={
      new ComponentAsset({
        ...demoAssets,
        storeOptions: {
          devtools: true,
        },
      })
    }
    style={{ height: 600 }}
    onCopy={(children) => {
      console.log('\u4EE3\u7801\u590D\u5236', children);
    }}
  />
);
`},60664:function(t,e){e.Z=`import { ProBuilder } from '@ant-design/pro-editor';

export default () => <ProBuilder style={{ height: 300 }} />;
`},59893:function(t,e){e.Z=`import { ColorPicker, Form, Input, Modal } from 'antd';
import React from 'react';

interface Values {
  name: string;
  color: string;
}

interface SessionFormProps {
  open: boolean;
  onCreate: (values: Values) => void;
  onCancel: () => void;
}

export const SessionForm: React.FC<SessionFormProps> = ({ open, onCreate, onCancel }) => {
  const [form] = Form.useForm();
  return (
    <Modal
      open={open}
      title="Join Session"
      okText="Join"
      onCancel={onCancel}
      onOk={() => {
        form
          .validateFields()
          .then(({ color, name }) => {
            form.resetFields();
            const colorHex = typeof color === 'string' ? color : color?.toHexString();
            onCreate({ color: colorHex, name });
          })
          .catch((info) => {
            console.log('Validate Failed:', info);
          });
      }}
    >
      <Form form={form} layout="vertical" name="form_in_modal" initialValues={{ color: '#1677FF' }}>
        <Form.Item
          name="name"
          label="Name"
          rules={[{ required: true, message: 'Please input your name' }]}
        >
          <Input />
        </Form.Item>
        <Form.Item
          name="color"
          label="Color"
          rules={[{ required: true, message: 'Please select your color' }]}
        >
          <ColorPicker format="hex" />
        </Form.Item>
      </Form>
    </Modal>
  );
};
`},47835:function(t,e){e.Z=`import { Awareness } from '@ant-design/pro-editor';
import { Button, Divider, Input } from 'antd';
import { memo, useState } from 'react';
import { WebrtcProvider } from 'y-webrtc';
import { SessionForm } from './SessionForm';
import { Provider, createStore, doc, useStore } from './store';

const App = memo(() => {
  const store = useStore((state) => ({
    count: state.count,
    increment: state.increment,
    updateText: state.updateText,
    text: state.text,
  }));
  const { count, increment, updateText, text } = store;

  return (
    <>
      <Divider />
      <Input
        value={text}
        onChange={(e) => {
          updateText(e.target.value);
        }}
      />
      <Divider />
      <p>Count: {count}</p>
      <Button onClick={increment}>To the Moon!</Button>
    </>
  );
});

const Container = () => {
  const [user, setUser] = useState(null);
  const [open, setOpen] = useState(false);

  const onCreate = (values) => {
    setUser(values);
    setOpen(false);
  };

  return (
    <Provider createStore={createStore}>
      {user ? null : (
        <Button
          type="primary"
          onClick={() => {
            setOpen(true);
          }}
        >
          Join
        </Button>
      )}
      <SessionForm
        open={open}
        onCreate={onCreate}
        onCancel={() => {
          setOpen(false);
        }}
      />
      {user ? <Awareness provider={new WebrtcProvider('test-room', doc)} user={user} /> : null}
      <App />
    </Provider>
  );
};

export default memo(Container);
`},27410:function(t,e){e.Z=`import { yjsMiddleware } from '@ant-design/pro-editor';
import isEqual from 'fast-deep-equal';
import { Doc } from 'yjs';
import type { StoreApi } from 'zustand';
import { createContext } from 'zustand-utils';
import { createWithEqualityFn } from 'zustand/traditional';

interface Store {
  count: number;
  text: string;
  increment: () => void;
  updateText: (text: string) => void;
}

export const doc = new Doc();

export const createStore = () =>
  createWithEqualityFn<Store>(
    yjsMiddleware<Store>(doc, 'shared', (set) => ({
      count: 0,
      text: '',
      users: [],
      increment: () =>
        set((state) => ({
          ...state,
          count: state.count + 1,
        })),
      updateText: (text) => set((state) => ({ ...state, text })),
    })),
    isEqual,
  );

export const { useStore, Provider } = createContext<StoreApi<Store>>();
`}}]);
