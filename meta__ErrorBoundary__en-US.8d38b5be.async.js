"use strict";(self.webpackChunk_ant_design_pro_editor=self.webpackChunk_ant_design_pro_editor||[]).push([[9458],{15980:function(u,r,n){var t;n.r(r),n.d(r,{demos:function(){return F}});var y=n(90228),p=n.n(y),j=n(87999),O=n.n(j),d=n(75271),T=n(94283),b=n(76004),A=n(6020),F={"errorboundary-demo-_prod":{component:d.memo(d.lazy(function(){return n.e(2781).then(n.bind(n,38182))})),asset:{type:"BLOCK",id:"errorboundary-demo-_prod",refAtomIds:["ErrorBoundary"],dependencies:{"index.tsx":{type:"FILE",value:n(50644).Z},antd:{type:"NPM",value:"5.12.8"},react:{type:"NPM",value:"18.3.1"},"...tsx":{type:"FILE",value:n(73471).Z},"react-layout-kit":{type:"NPM",value:"1.9.0"}},entry:"index.tsx",title:"Production Environment"},context:{antd:T,react:t||(t=n.t(d,2)),"/home/runner/work/pro-editor/pro-editor/src/ErrorBoundary/index.tsx":b,"react-layout-kit":A},renderOpts:{compile:function(){var f=O()(p()().mark(function m(){var s,D=arguments;return p()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,n.e(6495).then(n.bind(n,86495));case 2:return o.abrupt("return",(s=o.sent).default.apply(s,D));case 3:case"end":return o.stop()}},m)}));function l(){return f.apply(this,arguments)}return l}()}},"errorboundary-demo-_dev":{component:d.memo(d.lazy(function(){return n.e(2781).then(n.bind(n,93820))})),asset:{type:"BLOCK",id:"errorboundary-demo-_dev",refAtomIds:["ErrorBoundary"],dependencies:{"index.tsx":{type:"FILE",value:n(95558).Z},react:{type:"NPM",value:"18.3.1"},antd:{type:"NPM",value:"5.12.8"},"../index.tsx":{type:"FILE",value:n(73471).Z},"react-layout-kit":{type:"NPM",value:"1.9.0"}},entry:"index.tsx",description:"Error messages will be displayed directly during development",title:"Development Environment"},context:{react:t||(t=n.t(d,2)),antd:T,"/home/runner/work/pro-editor/pro-editor/src/ErrorBoundary/index.tsx":b,"react-layout-kit":A},renderOpts:{compile:function(){var f=O()(p()().mark(function m(){var s,D=arguments;return p()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,n.e(6495).then(n.bind(n,86495));case 2:return o.abrupt("return",(s=o.sent).default.apply(s,D));case 3:case"end":return o.stop()}},m)}));function l(){return f.apply(this,arguments)}return l}()}}}},76004:function(u,r,n){n.r(r),n.d(r,{default:function(){return S}});var t=n(25298),y=n.n(t),p=n(17069),j=n.n(p),O=n(62657),d=n.n(O),T=n(21742),b=n.n(T),A=n(83136),F=n.n(A),f=n(82092),l=n.n(f),m=n(5402),s=n(4401),D=n(68084),I=n(57820),o=n(15258),K=n(82901),U=n(75271),C=n(90142),e=n(52676),W=m.Z.Title,B=m.Z.Text,S=function(Z){b()(P,Z);var R=F()(P);function P(){var i;y()(this,P);for(var _=arguments.length,c=new Array(_),E=0;E<_;E++)c[E]=arguments[E];return i=R.call.apply(R,[this].concat(c)),l()(d()(i),"state",{error:void 0,info:{componentStack:""}}),l()(d()(i),"errorInfo",function(){var a,g=i.state,v=g.error,h=g.info;return(0,e.jsxs)(C.D,{style:{width:800,background:"rgba(0,0,0,0.02)",padding:"24px 40px"},gap:12,children:[(0,e.jsx)("div",{children:(0,e.jsxs)(B,{children:["\u9519\u8BEF\u4FE1\u606F\uFF1A",v==null?void 0:v.toString()]})}),(0,e.jsx)(C.D,{children:(a=h==null?void 0:h.componentStack.split(`
`).map(function(x,M){return(0,e.jsx)("div",{style:{textAlign:"left",fontSize:10},children:(0,e.jsx)(B,{type:"secondary",children:x})},x+M)}))!==null&&a!==void 0?a:null})]})}),l()(d()(i),"prodInfo",function(){var a=i.props.onExportConfig;return(0,e.jsxs)(C.D,{align:"center",children:[(0,e.jsx)(s.Z,{image:(0,e.jsx)("div",{style:{fontSize:80,lineHeight:1},children:"\u{1F914}"}),description:(0,e.jsxs)(C.D,{gap:16,children:[(0,e.jsx)(W,{level:5,children:" \u7EC4\u4EF6\u6E32\u67D3\u4F3C\u4E4E\u51FA\u4E86\u70B9\u5C0F\u95EE\u9898 "}),(0,e.jsxs)("div",{children:[(0,e.jsx)(B,{type:"secondary",children:"\u4E0D\u8FC7\u522B\u62C5\u5FC3\uFF0C\u4F60\u7684\u6570\u636E\u90FD\u8FD8\u5728\uFF0C\u53EF\u4EE5\u5C1D\u8BD5\u5BFC\u51FA\u6570\u636E\u540E\u91CD\u8BD5"}),(0,e.jsx)("br",{}),(0,e.jsx)("div",{style:{marginTop:8},children:(0,e.jsx)(B,{type:"secondary",children:"\u5982\u91CD\u8BD5\u540E\u4ECD\u7136\u5B58\u5728\u95EE\u9898\uFF0C\u8BF7\u8054\u7CFB\u5BA2\u670D\u4EBA\u5458"})})]})]}),children:(0,e.jsx)("div",{children:(0,e.jsxs)(D.Z,{children:[(0,e.jsx)(I.ZP,{type:"primary",onClick:a,children:"\u5BFC\u51FA\u914D\u7F6E"}),(0,e.jsx)(I.ZP,{onClick:function(){o.ZP.success("\u5DF2\u63D0\u4EA4Bug")},children:"\u63D0\u4EA4Bug"})]})})}),(0,e.jsx)("div",{style:{marginTop:24},children:i.errorInfo()})]})}),i}return j()(P,[{key:"componentDidCatch",value:function(_,c){this.setState({error:_,info:c})}},{key:"render",value:function(){var _=this.props,c=_.children,E=_.onRetry,a=_.showDev,g=a===void 0?!1:a,v=this.state,h=v.error,x=v.info;if(h){var M;return(0,e.jsx)(C.D,{style:{padding:24},children:g?(0,e.jsx)(K.Z,{type:"error",message:h.toString(),showIcon:!0,description:(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{style:{overflow:"auto",maxHeight:"calc(100vh - 200px)"},children:(M=x==null?void 0:x.componentStack.split(`
`).map(function(L,z){return(0,e.jsx)("div",{style:{textAlign:"left",fontSize:10},children:(0,e.jsx)(B,{type:"secondary",children:L})},L+z)}))!==null&&M!==void 0?M:null}),(0,e.jsx)("div",{style:{marginTop:24},children:(0,e.jsx)(I.ZP,{type:"primary",onClick:E,children:"\u91CD\u8BD5"})})]})}):this.prodInfo()})}return(0,e.jsx)(e.Fragment,{children:c})}}]),P}(U.Component)},54828:function(u,r,n){n.r(r),n.d(r,{texts:function(){return t}});const t=[{value:"General error prompt panel",paraId:0,tocIndex:0},{value:"Error boundary component property interface",paraId:1,tocIndex:4},{value:"Property",paraId:2,tocIndex:4},{value:"Type",paraId:2,tocIndex:4},{value:"Description",paraId:2,tocIndex:4},{value:"children",paraId:2,tocIndex:4},{value:"React.ReactNode",paraId:2,tocIndex:4},{value:"Child component",paraId:2,tocIndex:4},{value:"onExportConfig",paraId:2,tocIndex:4},{value:"() => void",paraId:2,tocIndex:4},{value:"Callback function for exporting configuration items",paraId:2,tocIndex:4},{value:"onRetry",paraId:2,tocIndex:4},{value:"() => void",paraId:2,tocIndex:4},{value:"Retry callback function",paraId:2,tocIndex:4},{value:"showDev",paraId:2,tocIndex:4},{value:"boolean",paraId:2,tocIndex:4},{value:"Whether to display developer options",paraId:2,tocIndex:4}]},95558:function(u,r){r.Z=`import { useState } from 'react';
import ErrorBoundary from '../index';

import { Button } from 'antd';

const App = () => {
  const [showError, setError] = useState(true);
  const list = {};
  return (
    <div>
      {showError ? (
        // @ts-ignore
        list.map((i) => i)
      ) : (
        <Button
          onClick={() => {
            setError(true);
          }}
        >
          \u70B9\u51FB\u89E6\u53D1\u9519\u8BEF
        </Button>
      )}
    </div>
  );
};

export default () => (
  <ErrorBoundary showDev>
    <App />
  </ErrorBoundary>
);
`},50644:function(u,r){r.Z=`import { Button } from 'antd';
import { useState } from 'react';
import ErrorBoundary from '..';

const App = () => {
  const [showError, setError] = useState(true);
  const list = {};
  return (
    <div>
      {showError ? (
        // @ts-ignore
        list.map((i) => i)
      ) : (
        <Button
          onClick={() => {
            setError(true);
          }}
        >
          \u70B9\u51FB\u89E6\u53D1\u9519\u8BEF
        </Button>
      )}
    </div>
  );
};

export default () => (
  <ErrorBoundary showDev={false}>
    <App />
  </ErrorBoundary>
);
`},73471:function(u,r){r.Z=`/* eslint-disable react/no-array-index-key */
import { Alert, Button, Empty, Space, Typography, message } from 'antd';
import { Component } from 'react';
import { Flexbox } from 'react-layout-kit';

const { Title, Text } = Typography;

/******************************************************
 ************************* Dom *************************
 ******************************************************/

/**
 * \u9519\u8BEF\u8FB9\u754C\u7EC4\u4EF6\u5C5E\u6027\u63A5\u53E3
 */
interface ErrorBoundaryProps {
  /**
   * \u5B50\u7EC4\u4EF6
   */
  children?: React.ReactNode;

  /**
   * \u5BFC\u51FA\u914D\u7F6E\u9879\u56DE\u8C03\u51FD\u6570
   */
  onExportConfig?: () => void;

  /**
   * \u91CD\u8BD5\u56DE\u8C03\u51FD\u6570
   */
  onRetry?: () => void;

  /**
   * \u662F\u5426\u663E\u793A\u5F00\u53D1\u8005\u9009\u9879
   */
  showDev?: boolean;
}

interface State {
  error?: Error;
  info: {
    componentStack: string;
  };
}

export default class ErrorBoundary extends Component<ErrorBoundaryProps, State> {
  state: State = {
    error: undefined,
    info: {
      componentStack: '',
    },
  };

  componentDidCatch(error: any, info: any) {
    this.setState({ error, info });
  }

  errorInfo = () => {
    const { error, info } = this.state;
    return (
      <Flexbox
        style={{
          width: 800,
          background: 'rgba(0,0,0,0.02)',
          padding: '24px 40px',
        }}
        gap={12}
      >
        <div>
          <Text>
            \u9519\u8BEF\u4FE1\u606F\uFF1A
            {error?.toString()}
          </Text>
        </div>

        <Flexbox>
          {info?.componentStack.split('\\n').map((i, index) => (
            // eslint-disable-next-line react/no-array-index-key
            <div key={i + index} style={{ textAlign: 'left', fontSize: 10 }}>
              <Text type={'secondary'}>{i}</Text>
            </div>
          )) ?? null}
        </Flexbox>
      </Flexbox>
    );
  };

  prodInfo = () => {
    const { onExportConfig } = this.props;
    return (
      <Flexbox align={'center'}>
        <Empty
          image={<div style={{ fontSize: 80, lineHeight: 1 }}>\u{1F914}</div>}
          description={
            <Flexbox gap={16}>
              <Title level={5}> \u7EC4\u4EF6\u6E32\u67D3\u4F3C\u4E4E\u51FA\u4E86\u70B9\u5C0F\u95EE\u9898 </Title>
              <div>
                <Text type={'secondary'}>\u4E0D\u8FC7\u522B\u62C5\u5FC3\uFF0C\u4F60\u7684\u6570\u636E\u90FD\u8FD8\u5728\uFF0C\u53EF\u4EE5\u5C1D\u8BD5\u5BFC\u51FA\u6570\u636E\u540E\u91CD\u8BD5</Text>
                <br />
                <div style={{ marginTop: 8 }}>
                  <Text type={'secondary'}>\u5982\u91CD\u8BD5\u540E\u4ECD\u7136\u5B58\u5728\u95EE\u9898\uFF0C\u8BF7\u8054\u7CFB\u5BA2\u670D\u4EBA\u5458</Text>
                </div>
              </div>
            </Flexbox>
          }
        >
          <div>
            <Space>
              <Button type={'primary'} onClick={onExportConfig}>
                \u5BFC\u51FA\u914D\u7F6E
              </Button>
              <Button
                onClick={() => {
                  message.success('\u5DF2\u63D0\u4EA4Bug');
                }}
              >
                \u63D0\u4EA4Bug
              </Button>
            </Space>
          </div>
        </Empty>
        <div style={{ marginTop: 24 }}>{this.errorInfo()}</div>
      </Flexbox>
    );
  };

  render() {
    const {
      children,
      onRetry,
      // \u7528\u4E8E\u5F00\u53D1 ErrorBoundary
      // showDev = false,
      showDev = process.env.NODE_ENV === 'development',
    } = this.props;
    const { error, info } = this.state;
    if (error) {
      // You can render any custom fallback UI
      return (
        <Flexbox style={{ padding: 24 }}>
          {showDev ? (
            <Alert
              type="error"
              message={error.toString()}
              showIcon
              description={
                <div>
                  <div
                    style={{
                      overflow: 'auto',
                      maxHeight: 'calc(100vh - 200px)',
                    }}
                  >
                    {info?.componentStack.split('\\n').map((i, index) => (
                      <div key={i + index} style={{ textAlign: 'left', fontSize: 10 }}>
                        <Text type={'secondary'}>{i}</Text>
                      </div>
                    )) ?? null}
                  </div>
                  <div style={{ marginTop: 24 }}>
                    <Button type="primary" onClick={onRetry}>
                      \u91CD\u8BD5
                    </Button>
                  </div>
                </div>
              }
            />
          ) : (
            this.prodInfo()
          )}
        </Flexbox>
      );
    }

    return <>{children}</>;
  }
}
`},6020:function(u,r,n){n.r(r),n.d(r,{Center:function(){return t.Z},Flexbox:function(){return y.D}});var t=n(55471),y=n(90142)}}]);
